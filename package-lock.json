const fs = require('fs');

fs.readFile('students.txt', 'utf8', (err, data) => {
  if (err) {
    console.error(err);
    return;
  }

  const students = JSON.parse(data);

  const compareStudents = (student1, student2) => {
  
    if (student1.totalMarks > student2.totalMarks) {
      return -1;
    } else if (student1.totalMarks < student2.totalMarks) {
      return 1;
    }

    if (student1.biologyMarks > student2.biologyMarks) {
      return -1;
    } else if (student1.biologyMarks < student2.biologyMarks) {
      return 1;
    }

    const dob1 = new Date(student1.dateOfBirth);
    const dob2 = new Date(student2.dateOfBirth);
    if (dob1 < dob2) {
      return -1;
    } else if (dob1 > dob2) {
      return 1;
    }

    return 0;
  };

  students.sort(compareStudents);
  console.log(students);
});